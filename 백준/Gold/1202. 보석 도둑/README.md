# [Gold II] 보석 도둑 - 1202 

[문제 링크](https://www.acmicpc.net/problem/1202) 

### 성능 요약

메모리: 16488 KB, 시간: 204 ms

### 분류

자료 구조, 그리디 알고리즘, 정렬, 우선순위 큐

### 제출 일자

2026년 2월 7일 02:51:05

### 문제 설명

<p>세계적인 도둑 상덕이는 보석점을 털기로 결심했다.</p>

<p>상덕이가 털 보석점에는 보석이 총 N개 있다. 각 보석은 무게 M<sub>i</sub>와 가격 V<sub>i</sub>를 가지고 있다. 상덕이는 가방을 K개 가지고 있고, 각 가방에 담을 수 있는 최대 무게는 C<sub>i</sub>이다. 가방에는 최대 한 개의 보석만 넣을 수 있다.</p>

<p>상덕이가 훔칠 수 있는 보석의 최대 가격을 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>첫째 줄에 N과 K가 주어진다. (1 ≤ N, K ≤ 300,000)</p>

<p>다음 N개 줄에는 각 보석의 정보 M<sub>i</sub>와 V<sub>i</sub>가 주어진다. (0 ≤ M<sub>i</sub>, V<sub>i</sub> ≤ 1,000,000)</p>

<p>다음 K개 줄에는 가방에 담을 수 있는 최대 무게 C<sub>i</sub>가 주어진다. (1 ≤ C<sub>i</sub> ≤ 100,000,000)</p>

<p>모든 숫자는 양의 정수이다.</p>

### 출력 

 <p>첫째 줄에 상덕이가 훔칠 수 있는 보석 가격의 합의 최댓값을 출력한다.</p>

---

### Idea

#### 처음 생각

처음에는 보석의 '가격'이 더 중요하다고 생각해서,  
``` text
1. {가격, 무게} 를 내림차순 정렬하는 우선순위 큐를 만든다.
2. 가방을 오름차순 정렬하는 우선순위 큐를 만든다.
3. 보석의 top() 을 하나씩 꺼내고, 가방의 top() 도 하나씩 꺼내서 최대 무게와 비교하고, ...
```

🛑 그러나 위 방법은 시간 초과 때문에 실패다.  
꺼낸 가방에 보석을 넣을 수 없다면, 맞는 가방을 찾은 후에 __실패한 가방을 다시 일일히 우선순위 큐에 넣어야 하기 때문__ 이다.  
</br>

--> ⚠️ 막히면?: (당연하게도) 바꿔서 생각을 해봐야 한다. 멍하니 왜 안되는지만 생각하지 말고.  

---

- 반대로 생각을 해 보자.
> 💡 위에서는 보석, 가격을 기준으로 했지만 이번에는 __가방을 기준__ 으로 하자.  
> (모든 가방에 보석을 넣는 것이 유리하므로, 가방에 들어갈 수 있는 보석을 찾는 방향을 택한 것이다)  
</br>

그럼 좀 더 생각해 보자.  
가방의 최대 무게보다 작거나 같은 무게의 보석만이 가방에 들어갈 수 있다.  
그런데 우선순위 큐에 들어 있던 보석을 그대로 꺼내면, 보석의 가격은 원하는 대로 정렬되어 있지 않다.  
(보석의 가격은 큰 것을, 무게는 작은 것을 원하기 때문이다.)  

> 그렇다면 💡 __조건에 맞는 보석들만__ 다시 '가격'을 기준으로 내림차순 정렬해 주면 된다.  
</br>

여기서 또 다른 핵심은 조건의 맞는 보석 중 가장 비싼 것을 가방과 매치한 다음이다.  
> 아직 후보 대기열에 남아 있는 보석들은 __어차피 이후 가방에도 들어갈 수 있으므로,__  
> 💡 __남은 보석들을 다시 원래의 큐에 넣지 않아도 된다. !!__  
> 따라서 큐에는 "현재 가방에 넣을 수 있는 보석" 만 존재하게 된다.  

---

#### ⚠️이외 자잘히 신경쓸 것들  

** 위 내용 외에도 신경쓸 것들이 많다 ....  

- 보석 후보군은 '업데이트'해야 한다 (초기화 xx):  
후보 보석 목록은 가방이 바뀔 때마다 초기화되는 것이 아니라, 작은 가방에는 들어가지 못한 보석들이 더 큰 가방에서도 고려될 수 있도록 __계속 누적__ 되어야 한다.
  
- 원본 보석함 참조 전 확인 (Null Check):  
보석함에서 보석을 꺼내 무게를 확인할 때, 이미 보석을 다 후보군으로 옮겨서 __보석함이 빈 상태는 아닌지__ 확인해야 한다.  
  
- 최종 선택 전 확인 (Null Check):  
가방에 넣을 보석을 후보군에서 꺼낼 때, __후보 보석이 0개인 상황은 아닌지__ 확인해야 한다.
</br>
--> `Null Check` 때문에 에러 많이 난다... 처음부터 신경쓰자.

