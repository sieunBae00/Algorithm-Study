# [Silver II] 쇠막대기 - 10799 

[문제 링크](https://www.acmicpc.net/problem/10799) 

### 성능 요약

메모리: 2268 KB, 시간: 4 ms

### 분류

자료 구조, 스택

### 제출 일자

2026년 1월 21일 20:51:54

### 문제 설명

<p>여러 개의 쇠막대기를 레이저로 절단하려고 한다. 효율적인 작업을 위해서 쇠막대기를 아래에서 위로 겹쳐 놓고, 레이저를 위에서 수직으로 발사하여 쇠막대기들을 자른다. 쇠막대기와 레이저의 배치는 다음 조건을 만족한다.</p>

<ul>
	<li>쇠막대기는 자신보다 긴 쇠막대기 위에만 놓일 수 있다. - 쇠막대기를 다른 쇠막대기 위에 놓는 경우 완전히 포함되도록 놓되, 끝점은 겹치지 않도록 놓는다.</li>
	<li>각 쇠막대기를 자르는 레이저는 적어도 하나 존재한다.</li>
	<li>레이저는 어떤 쇠막대기의 양 끝점과도 겹치지 않는다. </li>
</ul>

__<- 문제의 조건은 모든 막대기, 레이저를 빠짐없이 괄호 문자열로 표현 가능하도록 하기 위한 것임.__  


<p>아래 그림은 위 조건을 만족하는 예를 보여준다. 수평으로 그려진 굵은 실선은 쇠막대기이고, 점은 레이저의 위치, 수직으로 그려진 점선 화살표는 레이저의 발사 방향이다.</p>

<p style="text-align: center;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/10799/1.png" style="height:142px; width:267px"></p>

<p>이러한 레이저와 쇠막대기의 배치는 다음과 같이 괄호를 이용하여 왼쪽부터 순서대로 표현할 수 있다.</p>

<ol>
	<li>레이저는 여는 괄호와 닫는 괄호의 인접한 쌍 ‘( ) ’ 으로 표현된다. 또한, 모든 ‘( ) ’는 반드시 레이저를 표현한다.</li>
	<li>쇠막대기의 왼쪽 끝은 여는 괄호 ‘ ( ’ 로, 오른쪽 끝은 닫힌 괄호 ‘) ’ 로 표현된다. </li>
</ol>

<p>위 예의 괄호 표현은 그림 위에 주어져 있다.</p>

<p>쇠막대기는 레이저에 의해 몇 개의 조각으로 잘려지는데, 위 예에서 가장 위에 있는 두 개의 쇠막대기는 각각 3개와 2개의 조각으로 잘려지고, 이와 같은 방식으로 주어진 쇠막대기들은 총 17개의 조각으로 잘려진다. </p>

<p>쇠막대기와 레이저의 배치를 나타내는 괄호 표현이 주어졌을 때, 잘려진 쇠막대기 조각의 총 개수를 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>한 줄에 쇠막대기와 레이저의 배치를 나타내는 괄호 표현이 공백없이 주어진다. 괄호 문자의 개수는 최대 100,000이다. </p>

### 출력 

 <p>잘려진 조각의 총 개수를 나타내는 정수를 한 줄에 출력한다.</p>

---

### Idea

스택 사용. (괄호검사와 같은 맥락)  

기본적으로 '(', ')' 짝이 맞는 문자열. 따라서 짝이 안 맞을 경우(잘못된 입력)는 고려하지 않음.  
(예를 들어 ')' 이 나왔는데 스택에 '('가 존재하지 않을 경우 - 이 경우는 입력이 잘못된 것)

---

### 💭 문제 풀이 흐름

#### 1. 초기 접근  
- **아이디어**: 인접한 `()` 쌍(레이저)이 인접하지 않은 `(`, `)` 쌍(막대기) 사이에 몇 개나 존재하는가?
- **구현 고민**: '인접한 쌍인지 아닌지' 어떻게 알지?
  > `past`, `current` 변수 2개를 만들어서 둘을 비교하며 업데이트하자.

#### 🛑 난관 1
> "그런데 인접한 쌍(레이저)인지를 알아낸다고 해도, **막대기 사이에 레이저가 몇 개 있는지를 카운팅하는 건 너무 복잡하다.**"
- 막대기가 겹쳐 있을 때, 그 사이의 레이저 개수를 각각 세는 것은 어려움.

---

#### 2. 💡 발상의 전환
> **"막대기 사이 레이저가 몇 개인가?" (X)** > **"레이저가 몇 개의 막대기를 뚫고 지나가는가?" (O)**

- 레이저가 나타났을 때, 현재 쌓여있는 막대기를 몇 개 뚫는지 확인하면 된다.
- **공식 도출**: `(스택의 크기)` = `(현재 뚫고 지나가는 막대기의 수)`

#### 🛑 난관 2
몇 개 막대를 뚫고 지나가는지와 최종 조각 수 사이에는 어떤 관계가 있는가?
1. **레이저가 등장하면:** 뚫고 지나가는 막대기 개수만큼 조각 +. (일단 잘림)
2. 💡**막대기가 닫힐 때:** 막대기 하나가 끝나면 조각이 하나 더 추가. (레이저가 막대기를 3번 지나가면 최종 조각은 4개)

> **결론**: 카운팅은 두 가지 경우에 한다.
> 1. 레이저일 때 (`()`)
> 2. 막대기가 끝날 때 (')' 등장했는데 레이저가 아닐 경우)

---

#### 4. 💻 코드 구현 
`current` 문자가 `(` 인지 `)` 인지에 따라 나누기.

- **CASE 1: `current`가 `)` 일 때** (레이저 or 막대기 끝)
  - `past`를 확인한다.
  - **IF `past` == `(`**: **레이저**
    - 스택에서 `(` 하나 pop (레이저의 시작 부분 제거)
    - `answer += stack.size()` (잘린 조각 수 더하기)
  - **IF `past` == `)`**: **막대기 끝**
    - 스택에서 `(` 하나 pop (막대기의 시작 부분 제거)
    - `answer += 1` (마지막 남은 조각 더하기)

- **CASE 2: `current`가 `(` 일 때**
  - 당장 취할 행동 없음.
  - 일단 `stack`에 push.
